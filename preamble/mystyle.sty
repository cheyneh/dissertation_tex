\ProvidesPackage{mystyle}

% allows numbered subsections
\setsecnumdepth{subsection}
\setcounter{tocdepth}{3}

\usepackage[utf8]{inputenc}

\usepackage{subfig}

% \usepackage{charter}
\usepackage{libertine}
\usepackage{inconsolata}
\renewcommand{\sc}{\scshape}

\usepackage{xcolor}
% colors
% ====================================================================== %
\definecolor{darkblue}{rgb}{0,0,.4}
% \definecolor{nicered}{rgb}{.6,.6,.6}
% \definecolor{chaptitle}{rgb}{.0,.0,.0}
% red colors
% \definecolor{nicered}{rgb}{.647,.129,.149}
% \definecolor{chaptitle}{rgb}{.647,.129,.149}

% for black and white, uncomment these:
\definecolor{nicered}{rgb}{.6,.6,.6}
\definecolor{chaptitle}{rgb}{.0,.0,.0}
% \definecolor{darkblue}{rgb}{0,0,0}
% ====================================================================== %

\usepackage[bookmarks, plainpages=false, backref=page]{hyperref}
\hypersetup{
        colorlinks=true,
        linkcolor=darkblue,
        anchorcolor=darkblue,
        citecolor=darkblue,
        urlcolor=darkblue,
        pdfpagemode=UseThumbs,
        pdftitle={PhD Dissertation-Homberger},
        pdfsubject={Combinatorics},
        pdfauthor={Cheyne Homberger},
}

% \usepackage{parskip}
% \setlength{\parindent}{0pt}
% \setlength{\parskip}{1em}
\setlength{\parindent}{0pt}
\nonzeroparskip

% \makeatletter
% \renewcommand\@biblabel[1]{$\diamondsuit$}
% \makeatother

% \newenvironment{acknowledge}%
%   {{ \centering \scshape Acknowledgements \par }\small}%
%   {\par \ignorespacesafterend \newpage}

\newenvironment{acknowledge}{}{}

% \renewenvironment{abstract}%
% {{ \centering \scshape Abstract \par }}{\newpage}

% \renewenvironment{abstract}%
%   {{\centering \scshape Abstract  \par } \small %
%   \addtolength{\rightskip}{2pc}\addtolength{\leftskip}{2pc}%
%   \noindent\ignorespaces }%
%   {\par\ignorespacesafterend}

\renewenvironment{abstract}{}{}


% ====================================================================== %
% Headers
% ====================================================================== %
  \nouppercaseheads
  \makepagestyle{mystyle}
  \makeevenhead{mystyle}{\thepage}{}{\scshape \leftmark}
  \makeoddhead{mystyle}{\rightmark}{}{\thepage}
  \makeevenfoot{mystyle}{}{}{}
  \makeoddfoot{mystyle}{}{}{}
  \makepsmarks{mystyle}{%
    \createmark{chapter}{left}{nonumber}{}{}}
  \pagestyle{mystyle}


% ====================================================================== %
% Section styles
% ====================================================================== %
  \makeatletter
  \renewcommand\@memmain@floats{%
    \counterwithin{figure}{section}
    \counterwithin{table}{section}}
  \makeatother

  \usepackage{titlesec}

  % \titleformat{name}{style}{label}{label-sep}{beforecode}[aftercode]
  \titleformat{\section}[block]{\raggedright \Large \scshape}%
      {\titlerule \\[-2pt] \rmfamily ยง \thesection}{1em}{}[\titlerule]

  \titleformat{\subsection}{\sffamily \normalsize \bfseries}%
      {}{0em}{}[\titlerule]
      % {\thesubsection}{1em}{}



% ====================================================================== %
% Chapter styles
% ====================================================================== %

% ====================================================================== %
  % blue one
  \usepackage{color,calc}
  \newsavebox{\ChpNumBox}
  \definecolor{ChapBlue}{rgb}{0.00,0.65,0.65}
  \makeatletter
  \newcommand*{\thickhrulefill}{%
  \leavevmode\leaders\hrule height 1\p@ \hfill \kern \z@}
  \newcommand*\BuildChpNum[2]{%
  \begin{tabular}[t]{@{}c@{}}
  \makebox[0pt][c]{#1\strut} \\[.5ex]
  \colorbox{ChapBlue}{%
  \rule[-10em]{0pt}{0pt}%
  \rule{1ex}{0pt}\color{black}#2\strut
  \rule{1ex}{0pt}}%
  \end{tabular}}
  \makechapterstyle{blue}{%
  \renewcommand{\chapnamefont}{\large\scshape}
  \renewcommand{\chapnumfont}{\Huge\bfseries}
  \renewcommand{\chaptitlefont}{\raggedright\Huge\bfseries}
  \setlength{\beforechapskip}{20pt}
  \setlength{\midchapskip}{26pt}
  \setlength{\afterchapskip}{40pt}
  \renewcommand{\printchaptername}{}
  \renewcommand{\chapternamenum}{}
  \renewcommand{\printchapternum}{%
  \sbox{\ChpNumBox}{%
  \BuildChpNum{\chapnamefont\@chapapp}%
  {\chapnumfont\thechapter}}}
  \renewcommand{\printchapternonum}{%
  \sbox{\ChpNumBox}{%
  \BuildChpNum{\chapnamefont\vphantom{\@chapapp}}%
  {\chapnumfont\hphantom{\thechapter}}}}
  \renewcommand{\afterchapternum}{}
  \renewcommand{\printchaptertitle}[1]{%
  \usebox{\ChpNumBox}\hfill
  \parbox[t]{\hsize-\wd\ChpNumBox-1em}{%
  \vspace{\midchapskip}%
  \thickhrulefill\par
  \chaptitlefont ##1\par}}%
  }

% ====================================================================== %
  % hlines
  \makechapterstyle{hline}{%
  \renewcommand{\chapterheadstart}{\vspace*{\beforechapskip}% \hrule
  \medskip}
  \renewcommand{\chapnamefont}{\normalfont\LARGE\scshape -- \centering}
  \renewcommand{\chapnumfont}{\normalfont\LARGE\scshape}
  \renewcommand{\chaptitlefont}{\normalfont\LARGE\scshape \centering}
  \renewcommand{\chapternamenum}{ }
  \renewcommand{\printchapternum}{\chapnumfont \thechapter\space --}
  \renewcommand{\afterchapternum}{\par \vspace{1pc}}
  \renewcommand{\afterchaptertitle}{\par\nobreak\vspace{2pc}\hrule\vskip
  \afterchapskip}
  }

% ====================================================================== %
  % hlines centered


\usepackage{pifont,graphicx}
\newcommand\mylleaf{\ding{247}}
\newcommand\myrleaf{\reflectbox{\mylleaf}}
\makeatletter
\setlength\midchapskip{10pt}
\makechapterstyle{VZ15b}{
\renewcommand\chapternamenum{}
\renewcommand\printchaptername{}
\renewcommand\chapnamefont{\Large\scshape}
\renewcommand\printchapternum{%
\chapnamefont\null\hfill
\@chapapp \space \thechapter \hfill}
\renewcommand\printchapternonum{%
\par\hrule\vskip\midchapskip}
\renewcommand\chaptitlefont{\Huge\scshape\centering}
\renewcommand\afterchapternum{%
\par\nobreak\vskip\midchapskip\hrule\vskip\midchapskip}
\renewcommand\afterchaptertitle{%
\par\vskip\midchapskip\hrule\nobreak\vskip\afterchapskip}
}
\makeatother





% ====================================================================== %
  % red block
  \usepackage{color,calc,graphicx,soul}
  \makeatletter
  \newlength\dlf@normtxtw
  \setlength\dlf@normtxtw{\textwidth}
  \def\myhelvetfont{\def\sfdefault{mdput}}
  \newsavebox{\feline@chapter}
  \newcommand\feline@chapter@marker[1][4cm]{%
  \sbox\feline@chapter{%
  \resizebox{!}{#1}{\fboxsep=1pt%
  \colorbox{nicered}{\color{white}\bfseries\sffamily\thechapter}%
  }}%
  \rotatebox{90}{%
  \resizebox{%
  \heightof{\usebox{\feline@chapter}}+\depthof{\usebox{\feline@chapter}}}%
  {!}{\scshape\so\@chapapp}}\quad%
  \raisebox{\depthof{\usebox{\feline@chapter}}}{\usebox{\feline@chapter}}%
  }
  \newcommand\feline@chm[1][4cm]{%
  \sbox\feline@chapter{\feline@chapter@marker[#1]}%
  \makebox[0pt][l]{% aka \rlap
  \makebox[0cm][r]{\usebox\feline@chapter}%
  }}
  \makechapterstyle{redblock}{
  \renewcommand\chapnamefont{\normalfont\Large\scshape\raggedleft\so}
  \renewcommand\chaptitlefont{\normalfont\huge\bfseries\scshape\color{chaptitle}}
  \renewcommand\chapternamenum{}
  \renewcommand\printchaptername{}
  \renewcommand\printchapternum{\null\hfill\feline@chm[2.5cm]\par}
  \renewcommand\afterchapternum{\par\vskip\midchapskip}
  \renewcommand\printchaptertitle[1]{\chaptitlefont\raggedleft ##1\par}
  }
  \makeatother




% ====================================================================== %
% Title Page 
% ====================================================================== %

\makeatletter
\newcommand*{\mytitlepage}{%
\thispagestyle{empty}
\begingroup
% \vspace*{\baselineskip}
% \vfill
\hbox{%
\hspace*{0.1\textwidth}%
\rule{1pt}{\textheight}%
\hspace*{0.05\textwidth}% 
\parbox[b]{0.84\textwidth}{%
% \vbox{%
    % \vspace{0.1\textheight}
    {\Huge\scshape Patterns in Permutations \\and Involutions} \\[\baselineskip]%
    {\Large\itshape A Structural and Enumerative Approach \par}
    \vspace{0.2\textheight}
    {\large Cheyne Homberger\par}
    \vspace{0.3\textheight}
    {A Dissertation Presented to the Graduate School of the University of 
     Florida in Partial Fulfillment of the Requirements for the\\ 
     Degree of Doctor of Philosophy \\[1pc] 
     University of Florida \\[1pc]
     2014}
% }% end of vbox
}% end of parbox
}% end of hbox
\vfill
\null
\endgroup}
\makeatother


% \begin{titlepage}
% \begin{center}
% 
% % Upper part of the page. The '~' is needed because \\
% % only works if a paragraph has started.
% 
% \textsc{\Large Patterns in Permutations and Involutions }\\[1.5cm]
% 
% \textsc{\Large Final year project}\\[0.5cm]
% 
% % Title
% \HRule \\[0.4cm]
% { \huge \bfseries Lager brewing techniques \\[0.4cm] }
% 
% \HRule \\[1.5cm]
% 
% % Author and supervisor
% \begin{minipage}{0.4\textwidth}
% \begin{flushleft} \large
% \emph{Author:}\\
% John \textsc{Smith}
% \end{flushleft}
% \end{minipage}
% \begin{minipage}{0.4\textwidth}
% \begin{flushright} \large
% \emph{Supervisor:} \\
% Dr.~Mark \textsc{Brown}
% \end{flushright}
% \end{minipage}
% 
% \vfill
% 
% % Bottom of the page
% {\large \today}
% 
% \end{center}
% \end{titlepage}
